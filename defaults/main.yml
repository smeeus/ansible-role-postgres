---
# defaults file for postgres

# Define version to install
postgres_install_version: "{{ postgres_version }}"

# The port to listen to.
postgres_port: 5432

# The interface (address) to listen to. Set to "0.0.0.0" to listen on all interfaces.
postgres_listen_addresses: "127.0.0.1"

postgres_max_wal_size: 1GB
postgres_min_wal_size: 80MB
postgres_log_timezone: UTC
postgres_datestyle: iso, ymd
postgres_timezone: UTC
postgres_default_text_search_config: pg_catalog.english

postgres_config_entries:
  port:
    name: port
    value: "{{ postgres_port }}"
  listen_addresses:
    name: listen_addresses
    value: "'{{ postgres_listen_addresses }}'"
  unix_socket_directories:
    name: unix_socket_directories
    value: "'{{ postgres_socket_directory }}'"
  log_timezone:
    name: log_timezone
    value: "{{ postgres_log_timezone }}"
  datestyle:
    name: datestyle
    value: "'{{ postgres_datestyle }}'"
  timezone:
    name: timezone
    value: "{{ postgres_timezone }}"
  default_text_search_config:
    name: default_text_search_config
    value: "'{{ postgres_default_text_search_config }}'"
  max_wal_size:
    name: max_wal_size
    value: "{{ postgres_max_wal_size }}"
  min_wal_size:
    name: min_wal_size
    value: "{{ postgres_min_wal_size }}"

postgres_hba_entries:
  - type: local
    database: all
    user: all
    method: peer
  - type: host
    database: all
    user: all
    address: "127.0.0.1/32"
    method: ident
  - type: host
    database: all
    user: all
    address: "::1/128"
    method: ident
  - type: local
    database: replication
    user: all
    method: peer
  - type: host
    database: replication
    user: all
    address: "127.0.0.1/32"
    method: ident
  - type: host
    database: replication
    user: all
    address: "::1/128"
    method: ident
